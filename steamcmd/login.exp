#!/usr/bin/expect -f

# exp_internal 1
set timeout -1

set pass [lindex $argv 0]

spawn /home/steam/steamcmd/steamcmd.sh +force_install_dir $env(STEAMCMD_APP_INSTALL_DIR) +login $env(STEAMCMD_USER) +app_update $env(STEAMCMD_APP_ID) +quit
match_max 4

expect {
  -re ".*(P|p)assword: $" {send "$pass\r"; exp_continue}
}
